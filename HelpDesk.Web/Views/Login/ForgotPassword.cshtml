@model HelpDesk.Web.Models.UserDTO

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Sign Up</title>
    <link href="~/assets/css/login.css" rel="stylesheet" />
    <link href="~/assets/plugins/global/plugins.bundle.css" rel="stylesheet" />
    <link href="~/assets/css/style.bundle.css" rel="stylesheet" />
    <link href="~/assets/css/Styles.css" rel="stylesheet" />
    <style>
        .select2-selection__rendered {
            background: rgba(247, 247, 249, 0.7);
            height: 50px;
            line-height: 35px !important;
        }

        .select2-container--default .select2-selection--multiple, .select2-container--default .select2-selection--single {
            border: none
        }

        .input-group-prepend {
            margin-top: 1.25rem;
        }

        .input-group-text {
            border: none;
        }
    </style>
    <style>
        .load-sec {
            background-color: rgba(255,255,255,0.6);
            position: fixed;
            top: 0px;
            right: 0px;
            bottom: 0px;
            left: 0;
            z-index: 99;
        }

        .loader span {
            position: relative;
            display: inline-block;
            width: 5px;
            height: 0;
            margin: 0;
            padding: 0;
        }

            .loader span:before, .loader span:after {
                position: absolute;
                content: '';
                height: 2px;
                width: 5px;
                background-color: #c0392b;
                animation: top 2s infinite;
            }

            .loader span:before {
                bottom: 0;
                height: 2px;
                width: 5px;
                border-top-left-radius: 3px;
                border-top-right-radius: 3px;
            }

            .loader span:after {
                top: 0;
                height: 2px;
                width: 5px;
                border-bottom-left-radius: 3px;
                border-bottom-right-radius: 3px;
            }

            .loader span:nth-of-type(1):before, .loader span:nth-of-type(1):after {
                max-height: 10px;
                background-color: #03C9A9;
            }

            .loader span:nth-of-type(2):before, .loader span:nth-of-type(2):after {
                max-height: 20px;
                background-color: #03C9A9;
            }

            .loader span:nth-of-type(3):before, .loader span:nth-of-type(3):after {
                max-height: 30px;
                background-color: #03C9A9;
            }

            .loader span:nth-of-type(4):before, .loader span:nth-of-type(4):after {
                max-height: 20px;
                background-color: #03C9A9;
            }

            .loader span:nth-of-type(5):before, .loader span:nth-of-type(5):after {
                max-height: 10px;
                background-color: #03C9A9;
            }

        @@keyframes top {
            0% {
                height: 2px;
            }

            50% {
                height: 30px;
            }

            100% {
                height: 2px;
            }
        }

        @@keyframes bottom {
            0% {
                height: 2px;
            }

            50% {
                height: 30px;
            }

            100% {
                height: 2px;
            }
        }

        @@keyframes pulsate {
            0% {
                transform: scale(1, 1);
                opacity: 0.0;
                letter-spacing: 0px;
            }

            50% {
                opacity: 1.0;
            }

            100% {
                transform: scale(1.1, 1.1);
                opacity: 0.05;
                letter-spacing: 5px;
            }
        }
    </style>


</head>
<body class="kt-page--loading-enabled kt-page--loading kt-header--fixed kt-header--minimize-topbar kt-header-mobile--fixed kt-quick-panel--right kt-demo-panel--right kt-offcanvas-panel--right kt-subheader--enabled kt-subheader--transparent kt-page--loading">
    <div id="loader" class="load-sec">
        <div class="loader">
            <span></span>
            <span></span>
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>
    <!-- begin::Page loader -->
    <!-- end::Page Loader -->
    <!-- begin:: Page -->
    <div class="kt-grid kt-grid--ver kt-grid--root kt-page">
        <div class="kt-grid kt-grid--hor kt-grid--root  kt-login kt-login--v1" id="kt_login">
            <div class="kt-grid__item kt-grid__item--fluid kt-grid kt-grid--desktop kt-grid--ver-desktop kt-grid--hor-tablet-and-mobile">

                <!--begin::Aside-->
                <div class="kt-grid__item kt-grid__item--order-tablet-and-mobile-2 kt-grid kt-grid--hor kt-login__aside" style="background-image: url(http://208.109.10.196/AHCHelpdesk/assets/images/Login-Background-Image.jpg);">
                    <div class="kt-grid__item kt-grid__item--fluid kt-grid kt-grid--ver kt-padding-t-100-desktop">
                        <div class="kt-grid__item kt-grid__item--top">
                            <h3 class="h1 text-white kt-font-bold fa-3x"><strong>Welcome to<br /> AHC Help Desk!</strong></h3>
                            <h3 class="text-secondary kt-font-regular my-0">
                                Customer Service, Our Top Priority!
                            </h3>
                        </div>
                    </div>
                    <div class="kt-grid__item d_none_1024">
                        <div class="kt-login__info">
                            <div class="kt-login__copyright text-white text-center">
                                &copy 2021 Arabian Health Care.
                            </div>
                            <div class="kt-login__menu text-white">
                                Powered By <a href="https://www.creative-sols.com/" target="_blank" class="kt-link">Creative Solutions</a>
                            </div>
                            @*<div class="kt-login__menu">
                                    <a href="#" class="kt-link">Privacy</a>
                                    <a href="#" class="kt-link">Legal</a>
                                    <a href="#" class="kt-link">Contact</a>
                                </div>*@
                        </div>
                    </div>
                </div>
                <div class="kt-grid__item kt-grid__item--fluid  kt-grid__item--order-tablet-and-mobile-1  kt-login__wrapper">
                    <div class="kt-login__body">
                        <div class="kt-login__form">
                            <div class="kt-login__title">
                                <img src="~/assets/images/ahc_new_logo.png" height="50" class="mb-3" />
                                <h3>Change Password Request</h3>
                            </div>
                            <form class="kt-form" action="" novalidate="novalidate" id="kt_login_form">
                                <div class="form-group">
                                    <input id="txtSignupEmail" class="form-control " autocomplete="off" type="text" value="" placeholder="Enter Email Id" onchange="checkuseremail()">
                                </div>
                                <div class="kt-login__actions">
                                    <a href="#" id="btnrequest" onclick="sendchangerequest()" class="btn bg-secondery pt-3 btn-elevate kt-login__btn-primary">Submit</a>
                                    @*<a href="@Url.Action("ResetPassword","Login", new { username = "shahbaz",token="AKSLDHASBHASGASJCASBC" })" >Test</a>*@
                                </div>
                            </form>
                        </div>
                    </div>
                    <!--end::Body-->
                </div>
                <!--end::Content-->
            </div>
        </div>
    </div>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/7.2.0/sweetalert2.min.css">

    <script src="~/assets/plugins/global/plugins.bundle.js"></script>
    <script src="~/assets/js/scripts.bundle.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/7.2.0/sweetalert2.all.min.js"></script>
    <script src="~/assets/js/select2.js"></script>
    <script>

        document.getElementById("loader").style.display = "none";

        function sendchangerequest() {
            var email = $("#txtSignupEmail").val();
            if (email=="") {
                alert('Email Required');
                return false;
            }
             $.ajax({
                type: 'POST',
                url: '@Url.Action("SendChangePasswordRequest")',
                dataType: 'json',
                data: { useremail: email },
                success: function (data) {
                    //var v = data.success;
                    //if (v == true) {
                    //    alert('Email not verified');
                    //}
                    alert('request send');
                    document.getElementById("loader").style.display = "none";
                    return true;
                },
                error: function (ex) {
                    alert('Error');
                    document.getElementById("loader").style.display = "none";
                    return false;
                }
            });
            
        }

        function checkuseremail() {
            $('#txtSignupEmailerror').html('');
            var hasError = false;
            var email = $("#txtSignupEmail").val();
            var emailReg = /^([\w-\.]+@@([\w-]+\.)+[\w-]{2,4})?$/;
            var emailblockReg =
                /^([\w-\.]+@@([\w-]+\.)+[\w-]{2,4})?$/;

            var emailaddressVal = $("#txtSignupEmail").val();
            if (emailaddressVal == '') {
                $("#txtSignupEmail").after('<span id="txtSignupEmailerror" style="color:red;" class="error">Please enter your email address.</span>');
                hasError = true;
            }
            else if (!emailReg.test(emailaddressVal)) {
                $("#txtSignupEmail").after('<span id="txtSignupEmailerror" style="color:red;" class="error">Enter a valid email address.</span>');
                hasError = true;
            }

            else if (!emailblockReg.test(emailaddressVal)) {
                $("#txtSignupEmail").after('<span id="txtSignupEmailerror" style="color:red;" class="error">No yahoo, gmail or hotmail emails.</span>');
                hasError = true;
            }
             
            if (hasError == true) {
                $('#txtSignupEmail').val('');
                return false;
            }
            else {
                $('#txtSignupEmailerror').html('');
            }

            document.getElementById("loader").style.display = "block";
            $.ajax({
                type: 'POST',
                url: '@Url.Action("CheckUserEmail")',
                dataType: 'json',
                data: { useremail: email },
                success: function (data) {
                    var v = data.success;
                    $('#btnrequest').show();
                    if (v == true) {
                        alert('Email not verified');
                        $('#btnrequest').hide();
                    }
                    document.getElementById("loader").style.display = "none";
                    return true;
                },
                error: function (ex) {
                    alert('Error');
                    document.getElementById("loader").style.display = "none";
                    return false;
                }
            });
        }




    </script>
    <!--end::Page Scripts -->
</body>
</html>